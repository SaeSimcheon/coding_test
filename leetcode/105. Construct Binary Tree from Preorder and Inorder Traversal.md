

# Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, val=0, left=None, right=None):
#         self.val = val
#         self.left = left
#         self.right = right
class Solution:
    tree = None
    obs_index = 0  
    
    def buildTree(self, preorder, inorder) :
        self.tree = TreeNode()
        self.tree.val = preorder[0]
        pre =1
        
        print(self.tree)

        
        idx = inorder.index(self.tree.val)
        
        Q = [(self.tree,inorder[:idx],"left"),(self.tree,inorder[idx+1:],'right')]
        
        while pre < len(preorder):
            
            this = preorder[pre] # 1
            
            length = len(Q) # 
            
            for _ in range(length):
                sub,seq,ref = Q.pop(0) 


                if this in seq :
                    idx = seq.index(this)
                    
                    a = seq[:idx]
                    b = seq[idx+1:]
                    
                    if ref =='left':
                        sub.left = TreeNode(this)
                        Q.append((sub.left,a,'left'))
                        Q.append((sub.left,b,'right'))
                    else:
                        sub.right = TreeNode(this)
                        Q.append((sub.right,a,'left'))
                        Q.append((sub.right,b,'right'))
                else :
                    Q.append((sub,seq,ref))
            pre+=1
        
        return self.tree


            


        

